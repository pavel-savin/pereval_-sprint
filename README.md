
# üèîÔ∏è Pereval API

**REST API –¥–ª—è —É—á—ë—Ç–∞ –∏ –º–æ–¥–µ—Ä–∞—Ü–∏–∏ –≥–æ—Ä–Ω—ã—Ö –ø–µ—Ä–µ–≤–∞–ª–æ–≤**  
–°–µ—Ä–≤–µ—Ä–Ω–∞—è —á–∞—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã, –ø–æ–∑–≤–æ–ª—è—é—â–∞—è —Ç—É—Ä–∏—Å—Ç–∞–º –¥–æ–±–∞–≤–ª—è—Ç—å –¥–∞–Ω–Ω—ã–µ –æ –ø–µ—Ä–µ–≤–∞–ª–∞—Ö, –∞ –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–∞–º ‚Äî –ø—Ä–æ–≤–µ—Ä—è—Ç—å –∏—Ö.

---

## üìå –ó–∞–¥–∞—á–∞ –ø—Ä–æ–µ–∫—Ç–∞

–†–∞–∑—Ä–∞–±–æ—Ç–∞—Ç—å API –¥–ª—è –º–æ–±–∏–ª—å–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä–æ–µ:
1. –ü–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –¥–æ–±–∞–≤–ª—è—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–µ—Ä–µ–≤–∞–ª–∞—Ö (–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã, —Ñ–æ—Ç–æ, —É—Ä–æ–≤–µ–Ω—å —Å–ª–æ–∂–Ω–æ—Å—Ç–∏).
2. –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –º–æ–¥–µ—Ä–∞—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–ø–∏—Å–µ–π.
3. –ó–∞–ø—Ä–µ—â–∞–µ—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ—Å–ª–µ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è –º–æ–¥–µ—Ä–∞—Ü–∏–∏.

---

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ API

### –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã:
| –ú–µ—Ç–æ–¥ | –≠–Ω–¥–ø–æ–∏–Ω—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|----------|----------|
| `POST` | `/submitData/` | –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø–µ—Ä–µ–≤–∞–ª–∞ |
| `GET` | `/submitData/<id>/` | –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ ID |
| `PATCH` | `/submitData/<id>/update/` | –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (—Ç–æ–ª—å–∫–æ —Å—Ç–∞—Ç—É—Å `new`) |
| `GET` | `/submitData/list/?user__email=<email>` | –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ email –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |

### –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:
‚úÖ –†–∞–±–æ—Ç–∞ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏ –≤ Base64  
‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –∏ —É—Ä–æ–≤–Ω–µ–π —Å–ª–æ–∂–Ω–æ—Å—Ç–∏  
‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å—Ç–∞—Ç—É—Å `new` –¥–ª—è –Ω–æ–≤—ã—Ö –∑–∞–ø–∏—Å–µ–π  
‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö  
‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Docker + PostgreSQL

---

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

![Django](https://img.shields.io/badge/Django-092E20?logo=django&logoColor=white)
![DRF](https://img.shields.io/badge/DRF-red?logo=django&logoColor=white)
![PostgreSQL](https://img.shields.io/badge/PostgreSQL-316192?logo=postgresql&logoColor=white)
![Docker](https://img.shields.io/badge/Docker-2CA5E0?logo=docker&logoColor=white)

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞
```bash
git clone https://github.com/pavel-savin/pereval_-sprint
cd pereval
cp .env.example .env  # –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ë–î
```

## üöÄ –ü—Ä–∏–º–µ—Ä—ã API

### 1. POST /submitData/  
**–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–≤–∞–ª–∞**  
**–ó–∞–ø—Ä–æ—Å:**  
```json
{
  "beauty_title": "–ø–µ—Ä. –ì—Ä–æ–∑–Ω—ã–π",
  "title": "–ö–∞–≤–∫–∞–∑—Å–∫–∏–π –ø–µ—Ä–µ–≤–∞–ª",
  "user": {
    "email": "alpinist@mail.ru",
    "fam": "–ü–µ—Ç—Ä–æ–≤",
    "name": "–ò–≤–∞–Ω",
    "phone": "+7 999 123-45-67"
  },
  "coords": {
    "latitude": 43.256790,
    "longitude": 42.456123,
    "height": 3200
  },
  "level": {
    "summer": "2–ë"
  },
  "attached_images": [
    {
      "data": "iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=",
      "title": "–°–µ–¥–ª–æ–≤–∏–Ω–∞"
    }
  ]
}
```

**–û—Ç–≤–µ—Ç:**  
```json
{
  "status": 200,
  "message": null,
  "id": 105
}
```

---

### 2. GET /submitData/105/  
**–ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ ID**  
**–û—Ç–≤–µ—Ç:**  
```json
{
  "id": 105,
  "beauty_title": "–ø–µ—Ä. –ì—Ä–æ–∑–Ω—ã–π",
  "title": "–ö–∞–≤–∫–∞–∑—Å–∫–∏–π –ø–µ—Ä–µ–≤–∞–ª",
  "status": "new",
  "user": {
    "email": "alpinist@mail.ru",
    "fam": "–ü–µ—Ç—Ä–æ–≤",
    "name": "–ò–≤–∞–Ω",
    "phone": "+7 999 123-45-67"
  },
  "coords": {
    "latitude": 43.256790,
    "longitude": 42.456123,
    "height": 3200
  },
  "level": {
    "summer": "2–ë"
  },
  "attached_images": [
    {
      "data": "/media/images/105_view.jpg",
      "title": "–°–µ–¥–ª–æ–≤–∏–Ω–∞"
    }
  ]
}
```

---

### 3. PATCH /submitData/105/update/  
**–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–≤–∞–ª–∞**  
**–ó–∞–ø—Ä–æ—Å:**  
```json
{
  "title": "–û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π –ö–∞–≤–∫–∞–∑—Å–∫–∏–π –ø–µ—Ä–µ–≤–∞–ª",
  "level": {
    "summer": "3–ê"
  }
}
```

**–£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç:**  
```json
{
  "state": 1,
  "message": null
}
```

**–û—à–∏–±–∫–∞:**  
```json
{
  "state": 0,
  "message": "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–µ—â–µ–Ω–æ: –∑–∞–ø–∏—Å—å –Ω–µ –≤ —Å—Ç–∞—Ç—É—Å–µ 'new'"
}
```

---

### 4. GET /submitData/list/?user__email=alpinist@mail.ru  
**–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ email**  
**–û—Ç–≤–µ—Ç:**  
```json
[
  {
    "id": 105,
    "title": "–û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π –ö–∞–≤–∫–∞–∑—Å–∫–∏–π –ø–µ—Ä–µ–≤–∞–ª",
    "status": "pending",
    "user": {"email": "alpinist@mail.ru"},
    "coords": {"latitude": 43.256790}
  }
]
```
